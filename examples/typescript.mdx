---
title: TypeScript Examples
description: "Complete TypeScript examples for the Blockworks Research API"
---

## TypeScript SDK

Here are comprehensive TypeScript examples for integrating with the Blockworks Research API.

## Installation

First, install the required dependencies:

```bash
npm install axios dotenv
npm install -D @types/node typescript
```

## Basic Setup

### Environment Configuration

Create a `.env` file in your project root:

```env
BLOCKWORKS_API_KEY=your_api_key_here
BLOCKWORKS_API_URL=https://rest.staging.blockworksresearch.com
```

### Base API Client

```typescript
import axios, { AxiosInstance, AxiosResponse } from 'axios';
import dotenv from 'dotenv';

dotenv.config();

export class BlockworksAPI {
  private client: AxiosInstance;

  constructor() {
    this.client = axios.create({
      baseURL: process.env.BLOCKWORKS_API_URL,
      headers: {
        'x-api-key': process.env.BLOCKWORKS_API_KEY,
        'Content-Type': 'application/json',
      },
    });
  }

  async get<T>(endpoint: string, params?: any): Promise<T> {
    const response: AxiosResponse<T> = await this.client.get(endpoint, { params });
    return response.data;
  }
}
```

## Assets API Examples

### List All Assets

```typescript
import { BlockworksAPI } from './BlockworksAPI';

interface Asset {
  id: string;
  slug: string;
  name: string;
  symbol: string;
  market_cap?: number;
  price?: number;
  sector?: string;
}

interface AssetsResponse {
  data: Asset[];
  pagination: {
    page: number;
    limit: number;
    total: number;
    pages: number;
  };
}

const api = new BlockworksAPI();

async function listAssets() {
  try {
    const response = await api.get<AssetsResponse>('/v3/assets', {
      limit: 50,
      page: 1,
      expand: ['price', 'market_cap', 'sector']
    });

    console.log(`Found ${response.data.length} assets`);
    response.data.forEach(asset => {
      console.log(`${asset.name} (${asset.symbol}): $${asset.price}`);
    });

    return response;
  } catch (error) {
    console.error('Error fetching assets:', error);
    throw error;
  }
}

listAssets();
```

### Get Specific Asset

```typescript
async function getAsset(idOrSlug: string) {
  try {
    const response = await api.get<{ data: Asset }>(`/v3/assets/${idOrSlug}`, {
      expand: ['price', 'market_cap', 'addresses', 'markets']
    });

    const asset = response.data;
    console.log(`Asset: ${asset.name}`);
    console.log(`Symbol: ${asset.symbol}`);
    console.log(`Price: $${asset.price}`);
    console.log(`Market Cap: $${asset.market_cap?.toLocaleString()}`);

    return asset;
  } catch (error) {
    console.error(`Error fetching asset ${idOrSlug}:`, error);
    throw error;
  }
}

// Usage
getAsset('bitcoin');
getAsset('ethereum');
```

### Filter Assets by Sector

```typescript
async function getAssetsBySector(sector: string) {
  try {
    const response = await api.get<AssetsResponse>('/v3/assets', {
      sector: sector,
      limit: 20,
      expand: ['price', 'market_cap']
    });

    console.log(`Found ${response.data.length} assets in ${sector} sector`);
    
    const sorted = response.data.sort((a, b) => 
      (b.market_cap || 0) - (a.market_cap || 0)
    );

    return sorted;
  } catch (error) {
    console.error(`Error fetching ${sector} assets:`, error);
    throw error;
  }
}

// Usage
getAssetsBySector('DeFi');
getAssetsBySector('Layer 1');
```

## Metrics API Examples

### List Available Metrics

```typescript
interface Metric {
  identifier: string;
  name: string;
  description: string;
  unit: string;
  projects?: string[];
}

interface MetricsResponse {
  data: Metric[];
  pagination: {
    page: number;
    limit: number;
    total: number;
    pages: number;
  };
}

async function listMetrics() {
  try {
    const response = await api.get<MetricsResponse>('/v3/metrics', {
      limit: 50
    });

    console.log(`Found ${response.data.length} metrics`);
    response.data.forEach(metric => {
      console.log(`${metric.name}: ${metric.description}`);
    });

    return response;
  } catch (error) {
    console.error('Error fetching metrics:', error);
    throw error;
  }
}

listMetrics();
```

### Query Specific Metric

```typescript
interface MetricDataPoint {
  timestamp: string;
  value: number;
  project: string;
}

interface MetricQueryResponse {
  data: MetricDataPoint[];
  pagination: {
    page: number;
    limit: number;
    total: number;
    pages: number;
  };
}

async function queryMetric(identifier: string, project?: string) {
  try {
    const params: any = {
      limit: 100
    };

    if (project) {
      params.project = project;
    }

    const response = await api.get<MetricQueryResponse>(
      `/v3/metrics/${identifier}`,
      params
    );

    console.log(`Retrieved ${response.data.length} data points for ${identifier}`);
    
    // Show latest 5 data points
    response.data.slice(0, 5).forEach(point => {
      console.log(`${point.timestamp}: ${point.value} (${point.project})`);
    });

    return response;
  } catch (error) {
    console.error(`Error querying metric ${identifier}:`, error);
    throw error;
  }
}

// Usage
queryMetric('tvl', 'uniswap');
queryMetric('daily_active_users');
```

## Advanced Examples

### Batch Asset Requests

```typescript
async function batchGetAssets(slugs: string[]) {
  try {
    const requests = slugs.map(slug => 
      api.get<{ data: Asset }>(`/v3/assets/${slug}`, {
        expand: ['price', 'market_cap']
      })
    );

    const responses = await Promise.all(requests);
    const assets = responses.map(response => response.data);

    console.log('Batch results:');
    assets.forEach(asset => {
      console.log(`${asset.name}: $${asset.price}`);
    });

    return assets;
  } catch (error) {
    console.error('Error in batch request:', error);
    throw error;
  }
}

// Usage
batchGetAssets(['bitcoin', 'ethereum', 'solana']);
```

### Portfolio Tracking

```typescript
interface PortfolioAsset {
  slug: string;
  amount: number;
}

interface PortfolioValue {
  asset: Asset;
  amount: number;
  value: number;
}

class PortfolioTracker {
  private api: BlockworksAPI;

  constructor() {
    this.api = new BlockworksAPI();
  }

  async calculatePortfolioValue(portfolio: PortfolioAsset[]): Promise<PortfolioValue[]> {
    const assets = await Promise.all(
      portfolio.map(async (item) => {
        const response = await this.api.get<{ data: Asset }>(`/v3/assets/${item.slug}`, {
          expand: ['price']
        });
        return {
          asset: response.data,
          amount: item.amount,
          value: (response.data.price || 0) * item.amount
        };
      })
    );

    const totalValue = assets.reduce((sum, item) => sum + item.value, 0);
    console.log(`Total portfolio value: $${totalValue.toLocaleString()}`);

    return assets;
  }
}

// Usage
const tracker = new PortfolioTracker();
const myPortfolio: PortfolioAsset[] = [
  { slug: 'bitcoin', amount: 0.5 },
  { slug: 'ethereum', amount: 2.0 },
  { slug: 'solana', amount: 10.0 }
];

tracker.calculatePortfolioValue(myPortfolio);
```

### Error Handling

```typescript
import { AxiosError } from 'axios';

async function handleApiErrors() {
  try {
    const response = await api.get('/v3/assets/invalid-asset');
    return response;
  } catch (error) {
    if (error instanceof AxiosError) {
      switch (error.response?.status) {
        case 401:
          console.error('Unauthorized: Check your API key');
          break;
        case 404:
          console.error('Asset not found');
          break;
        case 429:
          console.error('Rate limit exceeded');
          break;
        default:
          console.error('API Error:', error.response?.data);
      }
    }
    throw error;
  }
}
```

## Best Practices

<CardGroup cols={2}>
  <Card title="Use Environment Variables" icon="lock">
    Always store your API key in environment variables, never in code
  </Card>
  <Card title="Implement Retry Logic" icon="refresh">
    Handle rate limits and temporary failures with exponential backoff
  </Card>
  <Card title="Cache Responses" icon="database">
    Cache API responses to reduce requests and improve performance
  </Card>
  <Card title="Type Safety" icon="shield">
    Use TypeScript interfaces to ensure type safety
  </Card>
</CardGroup>

## Next Steps

<CardGroup cols={2}>
  <Card
    title="Python Examples"
    icon="snake"
    href="/examples/python"
  >
    See equivalent examples in Python
  </Card>
  <Card
    title="API Reference"
    icon="book"
    href="/api-reference/introduction"
  >
    Explore the complete API documentation
  </Card>
</CardGroup>